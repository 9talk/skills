---
name: pl
description: 启动一个新的规划或者迭代指定规划。
disable-model-invocation: true
---

启动一个新的规划或者迭代指定规划。

**输入**：用户的请求应当包含变更名称（kebab-case）或对想要构建内容的描述。

**步骤**

1. **如果没有提供明确的输入，询问用户想要构建什么**
   使用 **AskUserQuestion Tool**（开放式，无预设选项）询问：
   > "您想要进行什么规划？请描述您想要构建或修复的内容。"

   根据他们的描述，推导出一个 kebab-case 名称（例如："add user authentication" → `add-user-auth`）。

   **重要提示**：在不了解用户想要构建什么的情况下，请勿继续。

2. **判断规划状态并执行相应操作**
   - **检查现有规划**：首先尝试读取与推导出的名称（或用户提供的名称）对应的规划文件。
   - **分支逻辑**：
      - **如果是新规划**：调用 `pl-init.sh` 脚本，传入规划名称以创建新的规划文件。
      - **如果是已有规划**：直接读取该规划的现有内容。
3. **共创与迭代**
   - **读取上下文**：始终基于最新读取的规划内容进行分析。
   - **协同工作**：与用户讨论规划细节，确定需要添加、修改或删除的内容。
   - **写回更新**：一旦达成共识或有内容改动，立即将更新后的完整内容写回规划文件。
   - **循环迭代**：每次交互都重复“读取最新内容 -> 共创 -> 写回”的过程，确保规划始终是最新的。

## 要求
- 必须严格区分是新规划初始化还是旧规划迭代。
- 新规划必须通过 `pl-init.sh` 脚本创建。
- 任何对规划的修改都必须先读取当前最新版本，修改后立即写回，保持数据同步。
- 禁止在未读取现有内容的情况下直接覆盖或假设规划状态。
